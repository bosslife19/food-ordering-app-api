(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),l=a.n(c),u=(a(43),a(45),a(2)),o=(a(47),a(12));var s=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"brandContainer"},r.a.createElement("h1",{className:"brand"},"WoksFoods"),r.a.createElement("ul",{className:a?"navList open":"navList"},r.a.createElement(o.b,{to:"/",className:"link"},r.a.createElement("li",null,"Home")),r.a.createElement(o.b,{to:"/admin",className:"link"},r.a.createElement("li",null,"Admin-Page"))),r.a.createElement("div",{className:"burger",onClick:function(){c(function(e){return!e})}},r.a.createElement("div",{className:"line1"}),r.a.createElement("div",{className:"line2"}),r.a.createElement("div",{className:"line3"})))},i=a(16);a(56);var m=function(){return r.a.createElement("div",{className:"heroContainer"},r.a.createElement("h1",null,"Place Your Yummy Order"),r.a.createElement("button",null,r.a.createElement(i.Link,{to:"#",className:"link"},"Contact Us")))},p=(a(58),a(9)),d=a(3),E=a.n(d),f=a(7),b=a(4),h=a.n(b),v=a(18),y=function(e,t){switch(t.type){case"GET_ALL_MENUS":return Object(p.a)({},e,{menu:t.payload});case"CREATE_MENU":return Object(p.a)({},e,{menu:[t.payload].concat(Object(v.a)(e.menu))});case"DELETE_MENU":return Object(p.a)({},e,{menu:e.menu.filter(function(e){return e._id!==t.payload._id})});case"UPDATE_MENU":var a=e.menu,n=a.findIndex(function(e){return e._id===t.payload._id});return a[n]=t.payload,Object(p.a)({},e,{menu:Object(v.a)(a)});case"GET_ALL_ORDERS":return Object(p.a)({},e,{order:Object(v.a)(t.payload)});case"CREATE_NEW_ORDER":return Object(p.a)({},e,{order:[].concat(Object(v.a)(e.order),[t.payload])});case"SEND_TO_FORM":return Object(p.a)({},e,{dish:t.payload.dish,price:t.payload.price});case"SEND_USER_DETAILS":return Object(p.a)({},e,{name:t.payload.name,email:t.payload.email,phone:t.payload.phone,address:t.payload.address,payment:t.payload.payment});case"DELETE_ORDER":return Object(p.a)({},e,{order:e.order.filter(function(e){return e._id!==t.payload._id})});case"CREATE_USER":return Object(p.a)({},e,{user:t.payload});case"LOGOUT":return Object(p.a)({},e,{user:null});case"SET_PAID":return Object(p.a)({},e,{paid:!0});default:return e}},O=Object(n.createContext)(),j={menu:[],order:[],dish:"",price:"",name:"",email:"",phone:"",address:"",payment:"",paid:!1,user:JSON.parse(localStorage.getItem("user"))||null};function g(e){var t=e.children,a=Object(n.useReducer)(y,j),c=Object(u.a)(a,2),l=c[0],o=c[1];Object(n.useEffect)(function(){localStorage.setItem("user",JSON.stringify(l.user))},[l.user]);var s=function(){var e=Object(f.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/menu");case 2:t=e.sent,o({type:"GET_ALL_MENUS",payload:t.data});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(f.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/order");case 2:t=e.sent,o({type:"GET_ALL_ORDERS",payload:t.data});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(O.Provider,{value:Object(p.a)({},l,{fetchMenus:s,dispatch:o,fetchOrders:i})},t)}var x=function(e){var t=e.menu,a=Object(n.useContext)(O).dispatch;return r.a.createElement("div",{className:"menuWrapper"},r.a.createElement("div",{className:"imgWrapper"},r.a.createElement("p",null,t.name),r.a.createElement("img",{src:t.photo,alt:""}),r.a.createElement("p",null,"price: \u20a6",t.price),r.a.createElement(i.Link,{to:"/order",className:"link menuLink",onClick:function(e){a({type:"SEND_TO_FORM",payload:{dish:t.name,price:t.price}})}},"order now"),r.a.createElement("p",{id:"desc"},t.desc)))};a(85);var N=function(){var e=Object(n.useContext)(O),t=e.menu,a=e.fetchMenus,c=Object(i.useLocation)().search;return Object(n.useEffect)(function(){a()},[c]),r.a.createElement("div",{className:"homeContainer"},r.a.createElement(m,null),r.a.createElement("div",{className:"menuContainer"},t.map(function(e){return r.a.createElement(x,{menu:e,key:e._id})})))},k=(a(87),a(36)),S=a.n(k);a(89);var _=function(e){var t=e.order,a=Object(n.useContext)(O).dispatch,c=function(){var e=Object(f.a)(E.a.mark(function e(){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("/api/order/"+t._id);case 2:(n=e.sent).data&&a({type:"DELETE_ORDER",payload:n.data});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"orderWrapper"},r.a.createElement("h4",null,r.a.createElement("strong",null,t.name)),r.a.createElement("p",null,r.a.createElement("strong",null,"Dish Ordered:"),t.dish),r.a.createElement("p",null,r.a.createElement("strong",null,"date ordered:"),new Date(t.createdAt).toDateString()),r.a.createElement("p",null,r.a.createElement("strong",null,"Address:"),t.address),r.a.createElement("p",null,r.a.createElement("strong",null,"Mode of Payment:"),t.payment),r.a.createElement("button",{onClick:c},"delete"))};a(91);var w=function(e){var t=e.menu,a=Object(n.useState)(!1),c=Object(u.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(t.name),i=Object(u.a)(s,2),m=i[0],p=i[1],d=Object(n.useState)(t.price),b=Object(u.a)(d,2),v=b[0],y=b[1],j=Object(n.useState)(t.desc),g=Object(u.a)(j,2),x=g[0],N=g[1],k=Object(n.useState)(!1),S=Object(u.a)(k,2),_=S[0],w=S[1],C=Object(n.useContext)(O),D=C.dispatch,R=C.order;Object(n.useEffect)(function(){R.map(function(e){return e.dish===t.name&&w(!0),_})},[R]);var T=function(){var e=Object(f.a)(E.a.mark(function e(){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("/api/menu/"+t._id);case 2:a=e.sent,console.log(D),a.data&&D({type:"DELETE_MENU",payload:a.data});case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(E.a.mark(function e(a){var n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={name:m,desc:x,price:v},e.next=4,h.a.put("/api/menu/"+t._id,n);case 4:r=e.sent,D({type:"UPDATE_MENU",payload:r.data}),o(!1);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"adminMenuWrapper"},l?r.a.createElement("form",{onSubmit:A},r.a.createElement("input",{type:"text",placeholder:"edit title",value:m,onChange:function(e){return p(e.target.value)}}),r.a.createElement("input",{type:"number",placeholder:"edit price",value:v,onChange:function(e){return y(e.target.value)}}),r.a.createElement("input",{type:"text",placeholder:"edit description",value:x,onChange:function(e){return N(e.target.value)}}),r.a.createElement("button",null,"update")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"editButton",onClick:function(){o(!0)}},"edit menu"),r.a.createElement("h3",null,t.name),r.a.createElement("p",null,t.desc),r.a.createElement("p",null,r.a.createElement("strong",null,"Prize:"),"\u20a6",t.price),r.a.createElement("p",null,r.a.createElement("strong",null,"Date Posted:"),new Date(t.createdAt).toDateString()),r.a.createElement("p",null,r.a.createElement("strong",null,"Status:"),_?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{color:"green"}},"Ordered")):r.a.createElement("span",{style:{color:"red"}},"Not Ordered")),r.a.createElement("button",{onClick:T,className:"deletebutton"},"Delete Menu")))};var C=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(u.a)(l,2),i=s[0],m=s[1],p=Object(n.useState)(""),d=Object(u.a)(p,2),b=d[0],v=d[1],y=Object(n.useState)(""),j=Object(u.a)(y,2),g=j[0],x=j[1],N=Object(n.useState)(!1),k=Object(u.a)(N,2),C=k[0],D=k[1],R=Object(n.useContext)(O),T=R.menu,A=R.dispatch,L=R.order,P=R.fetchOrders,M=R.fetchMenus;Object(n.useEffect)(function(){M(),P()},[]);var U=function(){var e=Object(f.a)(E.a.mark(function e(t){var n,r,l,u;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n={name:a,price:b,desc:g},!i){e.next=21;break}return(r=new FormData).append("file",i),r.append("upload_preset","food-ordering-app"),r.append("cloud_name","wokodavid"),e.prev=7,e.next=10,h.a.post("https://api.cloudinary.com/v1_1/wokodavid/image/upload",r);case 10:l=e.sent,console.log(l),n.photo=l.data.url,console.log(l.data.url,n.photo),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0);case 19:e.next=22;break;case 21:alert("Please include an image");case 22:return e.prev=22,e.next=25,h.a.post("/api/menu",n);case 25:(u=e.sent).data&&(c(""),x(""),m(null),v("")),A({type:"CREATE_MENU",payload:u.data}),D(!0),setTimeout(function(){D(!1)},4e3),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(22),console.log(e.t1);case 35:case"end":return e.stop()}},e,null,[[7,16],[22,32]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"adminWrapper"},r.a.createElement("div",{className:"adminControl"},r.a.createElement(o.b,{to:"/"},"Go back home"),r.a.createElement("button",{onClick:function(){A({type:"LOGOUT"})},id:"logout"},"logout"),r.a.createElement("div",{className:"adminProfile"},r.a.createElement("img",{src:S.a,alt:""})),r.a.createElement("div",{className:"addMenu"},r.a.createElement("h4",null,"Add menu"),r.a.createElement("form",{onSubmit:U},r.a.createElement("label",{htmlFor:"fileInput",style:{fontSize:"10px",color:"teal"},className:"label imgLabel"},r.a.createElement("i",{class:"fa-solid fa-image"}),"Add image"),r.a.createElement("input",{type:"file",id:"fileInput",style:{display:"none"},className:"writeTitle",onChange:function(e){return m(e.target.files[0])}}),r.a.createElement("input",{type:"text",placeholder:"input menu name",onChange:function(e){return c(e.target.value)},value:a}),r.a.createElement("input",{type:"number",placeholder:"input menu price",onChange:function(e){return v(e.target.value)},value:b}),r.a.createElement("input",{type:"text",placeholder:"brief description",onChange:function(e){return x(e.target.value)},value:g}),r.a.createElement("button",null,"Add to menu"),C&&r.a.createElement("p",{style:{color:"green",marginLeft:100,marginTop:10}},"Successfully Added"))),r.a.createElement("h1",{id:"h1"},"Orders"),r.a.createElement("div",{className:"orders"},L&&L.map(function(e){return r.a.createElement(_,{order:e,key:e._id})}))),r.a.createElement("div",{className:"adminEffect"},r.a.createElement("h3",{className:"h3"},"Available Menu"),T.map(function(e){return r.a.createElement(w,{menu:e,key:e._id})})))};a(93);var D=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(u.a)(l,2),s=o[0],i=o[1],m=Object(n.useState)(""),p=Object(u.a)(m,2),d=p[0],b=p[1],v=Object(n.useContext)(O).dispatch,y=function(){var e=Object(f.a)(E.a.mark(function e(t){var n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:a,password:s},e.prev=2,e.next=5,h.a.post("/api/admin/login",n);case 5:r=e.sent,console.log(r),v({type:"CREATE_USER",payload:r.data}),r.data&&window.location.replace("/admin"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),b(e.t0.response.data.error),setTimeout(function(){return b("")},5e3);case 15:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login"},r.a.createElement("span",{className:"loginTitle"},"Login"),r.a.createElement("form",{className:"loginForm",onSubmit:y},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",className:"loginInput",placeholder:"username is woko",onChange:function(e){return c(e.target.value)}}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"loginInput",placeholder:"password is woko",onChange:function(e){return i(e.target.value)}}),r.a.createElement("button",{className:"loginButton",type:"submit"},"Login"),d&&r.a.createElement("p",{style:{color:"red",marginLeft:30}},d)))},R=a(1);a(95);var T=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(u.a)(l,2),s=o[0],i=o[1],m=Object(n.useState)(""),p=Object(u.a)(m,2),d=p[0],b=p[1],v=Object(n.useState)(""),y=Object(u.a)(v,2),j=y[0],g=y[1],x=Object(n.useState)("Paystack"),N=Object(u.a)(x,2),k=N[0],S=N[1],_=Object(R.useHistory)(),w=Object(n.useContext)(O),C=w.dispatch,D=w.dish,T=w.price,A=function(){var e=Object(f.a)(E.a.mark(function e(t){var n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),C({type:"SEND_USER_DETAILS",payload:{name:a,email:s,phone:j,address:d,payment:k}}),n={name:a,email:s,address:d,phone:j,dish:D,price:T,payment:k},"Paystack"!==k){e.next=7;break}_.push("/paystackForm"),e.next=16;break;case 7:return e.next=9,h.a.post("/api/order",n);case 9:if(!(r=e.sent).data){e.next=16;break}return C({type:"CREATE_NEW_ORDER",payload:r.data}),e.next=14,h.a.post("/api/mail",{email:s,name:a});case 14:e.sent.data&&_.push("/success");case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"orderFormWrapper"},r.a.createElement("h1",null,"Order Details"),r.a.createElement("form",{onSubmit:A},r.a.createElement("label",null,"Name:"),r.a.createElement("input",{type:"text",placeholder:"enter your name",onChange:function(e){return c(e.target.value)}}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",placeholder:"enter your email",onChange:function(e){return i(e.target.value)}}),r.a.createElement("label",null,"Home Address:"),r.a.createElement("input",{type:"text",placeholder:"enter your Address",onChange:function(e){return b(e.target.value)}}),r.a.createElement("label",null,"Phone number:"),r.a.createElement("input",{type:"number",placeholder:"enter your Phone number",onChange:function(e){return g(e.target.value)}}),r.a.createElement("label",null,"Dish Ordered:"),r.a.createElement("input",{type:"text",value:D,readOnly:!0}),r.a.createElement("label",null,"Price:"),r.a.createElement("b",null,r.a.createElement("input",{type:"text",value:"".concat(T," Naira"),readOnly:!0})),r.a.createElement("label",null,"Mode of Payment:"),r.a.createElement("select",{onChange:function(e){return S(e.target.value)},value:k},r.a.createElement("option",{value:"Paystack"},"PayStack"),r.a.createElement("option",{value:"cash"},"Cash on Delivery")),r.a.createElement("button",null,"Place Order")))},A=(a(97),a(37));var L=function(){var e=Object(n.useContext)(O),t=e.name,a=e.price,c=e.email,l=e.phone,o=e.dish,s=e.address,i=e.payment,m=e.dispatch,p=Object(R.useHistory)(),d=Object(n.useState)(""),b=Object(u.a)(d,2),v=b[0],y=b[1];Object(n.useEffect)(function(){j()},[v]);var j=function(){var e=Object(f.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/key");case 2:t=e.sent,y(t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),g={email:c,amount:100*a,metadata:{name:t,phone:l},publicKey:v,text:"Pay With Paystack",onSuccess:function(){var e=Object(f.a)(E.a.mark(function e(){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/order",{name:t,price:a,email:c,phone:l,dish:o,address:s,payment:i});case 2:if(!(n=e.sent).data){e.next=9;break}return m({type:"CREATE_NEW_ORDER",payload:n.data}),m({type:"SET_PAID"}),p.push("/success"),e.next=9,h.a.post("/api/mail",{email:c,name:t});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),onClose:function(){return alert("Wait! Don't leave :(")}};return r.a.createElement("div",{className:"paystackWrapper"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement("input",{type:"text",value:t}),r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"text",value:c}),r.a.createElement("label",{htmlFor:"Phone no"},"Phone No :"),r.a.createElement("input",{type:"text",value:l}),r.a.createElement("label",{htmlFor:"dish"},"Dish Ordered:"),r.a.createElement("input",{type:"text",value:o}),r.a.createElement("label",{htmlFor:"price"},"Price:"),r.a.createElement("input",{type:"number",value:a})),r.a.createElement(A.a,Object.assign({className:"paystackButton"},g)))};a(99);var P=function(){var e=Object(n.useContext)(O),t=e.name,a=e.dish,c=e.address;return r.a.createElement("div",{className:"successWrapper"},r.a.createElement("h1",null,"Success!"),r.a.createElement("p",null,"Dear, ",t," Your order of ",a," was successful, and it will be delivered to you within the hour at",c," by one of our dispatch riders"),r.a.createElement("p",null,"Thank you for doing business with us!!!"),r.a.createElement(o.b,{to:"/",className:"link successLink"},"Continue browsing"))};var M=function(){var e=Object(n.useContext)(O),t=e.user,a=e.paid;return r.a.createElement("div",null,r.a.createElement(o.a,null,r.a.createElement(R.Switch,null,r.a.createElement(R.Route,{exact:!0,path:"/"},r.a.createElement(s,null),r.a.createElement(N,null)),r.a.createElement(R.Route,{exact:!0,path:"/login"},r.a.createElement(D,null)),r.a.createElement(R.Route,{path:"/admin"},t?r.a.createElement(C,null):r.a.createElement(D,null)),r.a.createElement(R.Route,{path:"/order"},r.a.createElement(s,null),r.a.createElement(T,null)),r.a.createElement(R.Route,{path:"/paystackForm"},r.a.createElement(s,null),r.a.createElement(L,null)),r.a.createElement(R.Route,{path:"/success"},a?r.a.createElement(P,null):r.a.createElement(L,null)))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null,r.a.createElement(M,null))),document.getElementById("root"))},36:function(e,t,a){e.exports=a.p+"static/media/pexels-djordje-cvetkovic-6389804.f3547217.jpg"},38:function(e,t,a){e.exports=a(101)},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},85:function(e,t,a){},87:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){}},[[38,2,1]]]);
//# sourceMappingURL=main.b0a4efe4.chunk.js.map